name: get_pubs 

on: 
  push: 
    paths:
      - _publications
permissions:
    # Give the default GITHUB_TOKEN write permission to commit and push the
    # added or changed files to the repository.
  contents: write

jobs: 
  build: 
    runs-on: ubuntu-latest
    steps: 
        - name: Checkout
          uses: actions/checkout@v4
        - name: Setup Python
          uses: actions/setup-python
          with:
            python-version: '3.11'
        - name: Install dependencies  
          run: |
              python -m pip install --upgrade pip 
              pip install pandas pyyaml 
        - name: Execute Python Script 
          run: |
            python3 collect_pub_files.py
        - name:  commit updated files
          uses: actions4git/setup-git@v1   
          run: | 
            git add "_data/pub_list.csv"
            git commit -m "update publication list"
            git push
